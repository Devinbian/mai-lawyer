<!--index.wxml-->
<view class="container">
  <custom-nav 
    id="customNav" 
    title="麦小律"
    bindnavheight="onNavHeight"
  ></custom-nav>
  
  <!-- Banner 区域 -->
  <view class="banner" style="top: {{statusBarHeight + 44}}px">
    <!-- Banner 装饰背景图 -->
    <image class="banner-bg" src="../../static/images/index/banner.png" mode="widthFix" />
    
    <view class="banner-text">
      <view class="title">您好，我是小麦</view>
      <view class="subtitle">您的全天候智能法律顾问，随时为您解答法律问题~</view>
    </view>
    <image class="robot-avatar" src="../../static/images/index/robot.png" />
  </view>

  <!-- 主内容区域 - 可滚动 -->
  <scroll-view 
    class="main-content" 
    scroll-y 
    style="margin-top: {{statusBarHeight + 44 + 88}}px"
  >
    <image class="bg-image" src="../../static/images/index/bg.png" mode="widthFix" />
    
    <view class="content-wrapper">
      <!-- 提示语 -->
      <view class="weui-cells__title">您可以这样问我</view>
      <view class="weui-cells weui-cells_after-title">
        <view wx:for="{{suggestions}}" wx:key="*this" 
          class="weui-cell weui-cell_access" 
          hover-class="weui-cell_active"
          bindtap="handleTapSuggestion" 
          data-text="{{item}}"
        >
          <view class="weui-cell__bd">{{item}}</view>
          <view class="weui-cell__ft weui-cell__ft_in-access"></view>
        </view>
      </view>

      <!-- 聊天记录 -->
      <view class="chat-container">
        <view class="message {{item.type}}" wx:for="{{messages}}" wx:key="index" id="msg-{{index}}">
          <image class="avatar" src="{{item.type === 'ai' ? 'https://mmbiz.qpic.cn/mmbiz/icTdbqWNOwNRna42FI242Lcia07jQodd2FJGIYQfG0LAJGFxM4FbnQP6yfMxBgJ0F3YRqJCJ1aPAK2dQagdusBZg/0' : userInfo.avatarUrl}}" />
          <view class="content">{{item.content}}</view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 输入框 - 固定在底部 -->
  <view class="input-container">
    <view class="weui-flex">
      <view class="weui-flex__item">
        <input class="weui-input" 
          value="{{inputValue}}"
          placeholder="请输入您的问题"
          bindinput="onInput"
          bindconfirm="handleSend"
        />
      </view>
      <view>
        <button class="weui-btn weui-btn_primary send-btn" 
          bindtap="handleSend"
          loading="{{loading}}"
        >
          发送
        </button>
      </view>
    </view>
  </view>
</view>
