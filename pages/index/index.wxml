<!--index.wxml-->
<scroll-view class="scrollarea" scroll-y type="list">
  <view class="container">
    <!-- Banner -->
    <view class="banner">
      <view class="banner-text">
        <view class="title">您好，我是小麦</view>
        <view class="subtitle">您的全天候智能法律顾问，随时为您解答法律问题~</view>
      </view>
      <image class="robot-avatar" src="/static/images/robot.png" />
    </view>

    <!-- 提示语 -->
    <view class="weui-cells__title">您可以这样问我</view>
    <view class="weui-cells weui-cells_after-title">
      <view wx:for="{{suggestions}}" wx:key="*this" 
        class="weui-cell weui-cell_access" 
        hover-class="weui-cell_active"
        bindtap="handleTapSuggestion" 
        data-text="{{item}}"
      >
        <view class="weui-cell__bd">{{item}}</view>
        <view class="weui-cell__ft weui-cell__ft_in-access"></view>
      </view>
    </view>

    <!-- 聊天记录 -->
    <scroll-view class="chat-container" scroll-y scroll-into-view="msg-{{messages.length-1}}">
      <view class="message {{item.type}}" wx:for="{{messages}}" wx:key="index" id="msg-{{index}}">
        <image class="avatar" src="{{item.type === 'ai' ? '/static/images/robot-avatar.png' : userInfo.avatarUrl}}" />
        <view class="content">{{item.content}}</view>
      </view>
    </scroll-view>

    <!-- 输入框 -->
    <view class="weui-footer_fixed-bottom input-container">
      <view class="weui-flex">
        <view class="weui-flex__item">
          <input class="weui-input" 
            value="{{inputValue}}"
            placeholder="请输入您的问题"
            bindinput="onInput"
            bindconfirm="handleSend"
          />
        </view>
        <view>
          <button class="weui-btn weui-btn_primary send-btn" 
            bindtap="handleSend"
            loading="{{loading}}"
          >
            发送
          </button>
        </view>
      </view>
    </view>
  </view>
</scroll-view>
